{"version":3,"file":"index.js","sources":["../src/Markdown.tsx","../src/renderer.ts"],"sourcesContent":["import type { FC } from 'react'\n\ninterface MarkdownProps {\n  className?: string\n}\n\nconst Markdown: FC<MarkdownProps> = ({ children, className = 'markdown' }) => {\n  return (\n    <div\n      dangerouslySetInnerHTML={{ __html: children as string }}\n      className={className}\n    />\n  )\n}\n\nexport default Markdown\n","import marked from 'marked'\n// @ts-ignore\nimport hljs from 'highlight.js' // 'highlight.js/lib/core'\n\nconst defalutLanguages: string[] = [\n  'javascript',\n  'bash',\n  'xml',\n  'css',\n  'markdown',\n  'less',\n  'bash',\n  'css',\n  'diff',\n  'django',\n  'dockerfile',\n  'nginx',\n  'node-repl',\n  'pgsql',\n  'scss',\n  'shell',\n  'sql',\n  'typescript'\n]\n\nfunction getSupportLanguage(lang: string) {\n  if (lang === 'js') {\n    lang = 'javascript'\n  }\n  if (lang === 'ts') {\n    lang = 'typescript'\n  }\n  if (lang === 'html') {\n    lang = 'xml'\n  }\n  if (lang === 'sass') {\n    lang = 'scss'\n  }\n  return lang\n}\n\n/**\n * 强化 markdown loader 语法高亮\n * @param languages\n * @returns\n */\nexport default function renderer(languages = defalutLanguages) {\n  languages.forEach(langName => {\n    const lang = getSupportLanguage(langName)\n    if (defalutLanguages.includes(lang)) {\n      const langModule = require(`highlight.js/lib/languages/${lang}`)\n      hljs.registerLanguage(lang, langModule)\n    }\n  })\n\n  const renderer = new marked.Renderer()\n  const codeRenderer = function (code: string, lang: string) {\n    const langName = getSupportLanguage(lang)\n    const hlCode = langName\n      ? hljs.highlight(code, { language: langName }).value\n      : hljs.highlightAuto(code).value\n    return `<div class=\"doc-highlight\"><pre><code class=\"${\n      langName || ''\n    }\">${hlCode}</code></pre></div>`\n  }\n  renderer.code = codeRenderer\n\n  return renderer\n}\n"],"names":["_jsx","hljs","marked"],"mappings":";;;;;;;;;;;;;IAMM,QAAQ,GAAsB,UAAC,EAAoC;QAAlC,QAAQ,cAAA,EAAE,iBAAsB,EAAtB,SAAS,mBAAG,UAAU,KAAA;IACrE,QACEA,wBACE,uBAAuB,EAAE,EAAE,MAAM,EAAE,QAAkB,EAAE,EACvD,SAAS,EAAE,SAAS,WACpB,EACH;AACH;;ACTA,IAAM,gBAAgB,GAAa;IACjC,YAAY;IACZ,MAAM;IACN,KAAK;IACL,KAAK;IACL,UAAU;IACV,MAAM;IACN,MAAM;IACN,KAAK;IACL,MAAM;IACN,QAAQ;IACR,YAAY;IACZ,OAAO;IACP,WAAW;IACX,OAAO;IACP,MAAM;IACN,OAAO;IACP,KAAK;IACL,YAAY;CACb,CAAA;AAED,SAAS,kBAAkB,CAAC,IAAY;IACtC,IAAI,IAAI,KAAK,IAAI,EAAE;QACjB,IAAI,GAAG,YAAY,CAAA;KACpB;IACD,IAAI,IAAI,KAAK,IAAI,EAAE;QACjB,IAAI,GAAG,YAAY,CAAA;KACpB;IACD,IAAI,IAAI,KAAK,MAAM,EAAE;QACnB,IAAI,GAAG,KAAK,CAAA;KACb;IACD,IAAI,IAAI,KAAK,MAAM,EAAE;QACnB,IAAI,GAAG,MAAM,CAAA;KACd;IACD,OAAO,IAAI,CAAA;AACb,CAAC;SAOuB,QAAQ,CAAC,SAA4B;IAA5B,0BAAA,EAAA,4BAA4B;IAC3D,SAAS,CAAC,OAAO,CAAC,UAAA,QAAQ;QACxB,IAAM,IAAI,GAAG,kBAAkB,CAAC,QAAQ,CAAC,CAAA;QACzC,IAAI,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;YACnC,IAAM,UAAU,GAAG,OAAO,CAAC,gCAA8B,IAAM,CAAC,CAAA;YAChEC,wBAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,UAAU,CAAC,CAAA;SACxC;KACF,CAAC,CAAA;IAEF,IAAM,QAAQ,GAAG,IAAIC,0BAAM,CAAC,QAAQ,EAAE,CAAA;IACtC,IAAM,YAAY,GAAG,UAAU,IAAY,EAAE,IAAY;QACvD,IAAM,QAAQ,GAAG,kBAAkB,CAAC,IAAI,CAAC,CAAA;QACzC,IAAM,MAAM,GAAG,QAAQ;cACnBD,wBAAI,CAAC,SAAS,CAAC,IAAI,EAAE,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,CAAC,KAAK;cAClDA,wBAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,KAAK,CAAA;QAClC,OAAO,sDACL,QAAQ,IAAI,EAAE,YACX,MAAM,wBAAqB,CAAA;KACjC,CAAA;IACD,QAAQ,CAAC,IAAI,GAAG,YAAY,CAAA;IAE5B,OAAO,QAAQ,CAAA;AACjB;;;;;"}